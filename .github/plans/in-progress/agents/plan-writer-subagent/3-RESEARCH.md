# Research: plan-writer subagent

## Context

- Goal: introduce a plan-writer subagent, rename the implementation plan file to reduce confusion, and update docs/prompts/templates to match the new handoff flow.
- Stakeholders: Vibe Flow maintainers, users installing the agent suite, contributors updating prompts/docs.
- Audience: maintainers and implementers of the agent suite.

## Codebase Analysis

### Key files inspected

- .github/agents/vibe-flow.agent.md
- .github/agents/research.agent.md
- .github/agents/implement.agent.md
- .github/skills/orchestration/SKILL.md
- .github/skills/orchestration/references/workflow.md
- docs/vibeflow/pdd-protocol.md
- docs/vibeflow/orchestrator-manual.md
- docs/vibeflow/research-skill.md
- README.md
- install-vibeflow.md
- update-vibeflow.md
- .github/prompts/new-feature.prompt.md
- .github/prompts/update-feature.prompt.md
- .github/prompts/plan-only.prompt.md
- .github/skills/research/SKILL.md
- docs/templates/plan-template.md

### Architectural notes

- The current workflow assumes research writes three artifacts: 3-RESEARCH.md, 4-SPEC.md, and 5-PLAN.md.
- The implement agent reads 5-PLAN.md as the task source of truth and marks tasks complete there.
- Orchestrator and protocol docs reference 5-PLAN.md in workflow steps and parallel reconciliation guidance.
- The installer and update prompts fetch a fixed set of agents and prompts; a new subagent requires updates to these instructions.

### Hotspots / risk areas

- Renaming 5-PLAN.md affects docs, templates, prompts, and agent instructions in multiple locations.
- Historical plan artifacts in .github/plans/complete and existing in-progress plans likely reference 5-PLAN.md; these should remain as historical record unless explicitly migrated.
- Orchestrator and implement agent behavior must remain compatible during transition (existing 5-PLAN.md plans should not break).

## External Discovery

### Links & evidence

- [Agentskills spec](https://agentskills.io/specification)
- No additional external sources required for this change.

## Recommendation

- Recommendation: add a plan-writer subagent responsible for producing the implementation task file, rename 5-PLAN.md to 5-TASKS.md, and update the orchestrator workflow to call plan-writer between research and implement.
- Rationale: separating planning from research clarifies ownership, reduces conflation between planning and orchestrator plans, and allows a more focused subagent to craft task sequences.

## Evidence & Artifacts

### Files that reference 5-PLAN.md

**Core agent and protocol assets (update required)**

- .github/agents/vibe-flow.agent.md
- .github/agents/research.agent.md
- .github/agents/implement.agent.md
- .github/skills/orchestration/SKILL.md
- .github/skills/orchestration/references/workflow.md
- docs/vibeflow/pdd-protocol.md
- docs/vibeflow/orchestrator-manual.md
- README.md
- .github/copilot-instructions.md
- docs/vibeflow/research-skill.md

**Prompts (update required)**

- .github/prompts/update-feature.prompt.md
- .github/prompts/plan-only.prompt.md

**Templates (update required)**

- .github/skills/orchestration/assets/overview-template.md
- .github/skills/orchestration/assets/progress-log-template.md
- .github/skills/orchestration/assets/spec-template.md
- docs/templates/progress-log-template.md
- docs/templates/spec-template.md
- docs/templates/plan-template.md
- .github/skills/research/SKILL.md
- .github/skills/research/assets/spec-template.md

**Legacy/archived agent copies (update only if intentionally maintained)**

- .github/agents/v1/research.agent.md
- .github/agents/v1/implement.agent.md

**Historical plan artifacts (do not modify unless explicitly migrating archives)**

- .github/plans/complete/\*\* (multiple references in past plans)
- .github/plans/in-progress/\*\* (existing plans may still use 5-PLAN.md)

---

_Generated by `research` skill._
