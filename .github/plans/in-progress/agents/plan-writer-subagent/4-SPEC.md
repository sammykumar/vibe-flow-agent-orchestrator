# Spec: plan-writer subagent

## Overview

- Purpose: introduce a plan-writer subagent that owns the implementation task file and rename 5-PLAN.md to 5-TASKS.md to reduce confusion with orchestrator plans.
- Goals & success criteria:
  - Add a plan-writer subagent with a clear scope and workflow.
  - Update orchestration flow to call plan-writer after research and before implement.
  - Rename the implementation task file to 5-TASKS.md across docs, prompts, and templates.
  - Provide a compatibility strategy for existing plans using 5-PLAN.md.

## Design

### Architecture

- New subagent: plan-writer-agent (file: .github/agents/plan-writer.agent.md).
- Outputs:
  - 5-TASKS.md (new task plan file).
  - 2-PROGRESS.md updates for plan-writer status and handoff.
- Inputs:
  - 3-RESEARCH.md
  - 4-SPEC.md

### Workflow

1. Orchestrator creates 1-OVERVIEW.md and 2-PROGRESS.md.
2. Research agent produces 3-RESEARCH.md and 4-SPEC.md only.
3. Plan-writer agent produces 5-TASKS.md based on 3-RESEARCH.md + 4-SPEC.md.
4. Implement agent reads 5-TASKS.md and updates tasks in that file.

### Naming change

- Rename the implementation plan file from 5-PLAN.md to 5-TASKS.md.
- Update all canonical documentation, prompts, and templates to reference 5-TASKS.md.
- Require 5-TASKS.md going forward; no fallback to 5-PLAN.md.

### Prompts & docs updates

- Update prompts to reference 5-TASKS.md:
  - update-feature.prompt.md
  - plan-only.prompt.md
- Update docs and templates to reflect plan-writer phase and 5-TASKS.md.

## Constraints

- Security, permissions, and scope:
  - All plan-writer edits must be limited to the plan directory.
  - No source code changes in this phase.
  - Follow single-writer rules for 2-PROGRESS.md.

## Acceptance Criteria

- A plan-writer subagent is defined and included in orchestration flow and installation/update prompts.
- Research agent outputs do not claim ownership of 5-TASKS.md.
- Implement agent reads and updates 5-TASKS.md.
- Docs, templates, and prompts consistently reference 5-TASKS.md.
- Historical plan artifacts remain intact; migration is optional and documented.

## Deliverables

- Updated agent definitions and docs:
  - .github/agents/vibe-flow.agent.md
  - .github/agents/research.agent.md
  - .github/agents/implement.agent.md
  - .github/agents/plan-writer.agent.md (new)
  - docs/vibeflow/pdd-protocol.md
  - docs/vibeflow/orchestrator-manual.md
  - docs/vibeflow/research-skill.md
- Updated prompts:
  - .github/prompts/update-feature.prompt.md
  - .github/prompts/plan-only.prompt.md
- Updated templates and skills:
  - .github/skills/orchestration/SKILL.md
  - .github/skills/orchestration/references/workflow.md
  - .github/skills/orchestration/assets/overview-template.md
  - .github/skills/orchestration/assets/progress-log-template.md
  - .github/skills/orchestration/assets/spec-template.md
  - .github/skills/research/SKILL.md
  - .github/skills/research/assets/spec-template.md
  - docs/templates/plan-template.md
  - docs/templates/progress-log-template.md
  - docs/templates/spec-template.md
- Installer/update instructions:
  - install-vibeflow.md
  - update-vibeflow.md
- README updates (workflow diagram + agent list).

---

_Generated by `research` skill._
